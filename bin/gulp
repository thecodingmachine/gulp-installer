#!/usr/bin/php
<?php
// Let's get the name of the command in first parameter:
$command = array_shift($argv);
$gulpPos = strrpos($command, "gulp");

$pathToNode = substr($command, 0, $gulpPos);

// Assumes bin directory is in vendor/bin (not always true bue good enough for now).
$pathToNodeModules = $pathToNode.'..'.DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR;

$newCommand = $pathToNode."node ".$pathToNodeModules."node_modules".DIRECTORY_SEPARATOR."gulp".DIRECTORY_SEPARATOR."bin".DIRECTORY_SEPARATOR."gulp.js ";

passthru($newCommand.implode(' ', $argv));
